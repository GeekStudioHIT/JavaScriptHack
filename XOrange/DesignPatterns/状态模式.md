# 状态模式
- [参考一](http://www.cnblogs.com/TomXu/archive/2012/04/18/2437099.html)
- 使用场景
	- 一个对象的行为取决于它的状态，并且它必须在运行时刻根据状态改变它的行为。
	- 一个操作中含有大量的分支语句，而且这些分支语句依赖于该对象的状态。状态通常为一个或多个枚举常量的表示。


在这个状态模式中，首先有个 State 父类（子类其实并没有公共关系，各自做的事情其实都不一样，那为什么还要有个父类呢？），用于抽象地描述整个下载过程的状态，里面有四个接口（我为什么要说是接口？）：download，pause，fail，finish。（回答前面那两个问题，读《代码大全》第 5.3 节，抽象是一种能让你在关注某一概念的同时可以放心地忽略其中一些细节的能力。从复杂度的观点来看，抽象的主要好处就在于它使你能忽略无关的细节。有了抽象，你只需要关注最外层也就是最抽象的那一层，无需关注内部实现细节。让你（人类）的思维更加集中，让人类的头脑不再感觉一团乱糟糟的，让人类更加简单地去管理整个项目，这便降低了复杂度。而工程的本质就是管理复杂度。）

接着就是一个 Controller（自行学习 MVC 架构，这也是为了封装解耦，降低复杂度）。这个 Controller 对外暴露四个公共方法，以供 View 层调用，每个公共方法里面就是相应的状态应该做的事情。然后还有一个设置状态的方法和获取各种状态的方法。知道为什么要有一个设置状态的方法和获取各种状态的方法吗？首先，你得学一下状态机。设置状态的方法和获取各种状态的方法的存在，就是为了这个状态机的状态转换。然后这个状态是什么呢？这个状态就是这个 controller 的一个属性，并且在这个 controller 的构造函数中给这个状态机加一个初始状态。

那么，首先是这个初始状态，它是 State 父类的一个实现，并且在它自己应该实现的那个方法中，进行了状态的跳转。

其次，便是 State 父类中声明的那个接口的相应实现，每一个接口的对应实现都包括状态的跳转，另外再注意一些逻辑细节就可以了。

一个用 JavaScript 语言实现的用于描述下载过程的状态模式 Demo 就这样实现了。

状态模式，简而言之，整个体系的行为随状态的变化而变化。

